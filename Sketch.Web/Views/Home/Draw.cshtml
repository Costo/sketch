@using Newtonsoft.Json
@using Sketch.Web.Serialization
@model  Sketch.Core.ReadModel.DrawingSessionDetail
@{
    ViewBag.Title = "Home Page";
}
<style>

</style>
<header>
    <h1>@ViewBag.Title</h1>
</header>
<div class='row'>
    <div class='span12'>
        <div class="img-container"></div>
    </div>
</div>
@section scripts
{
    @{
        var settings = new JsonSerializerSettings
        {
            ContractResolver = new DrawingSessionContractResolver()
        };
        settings.Converters.Add(new TimeSpanJsonConverter());
    }
    <script>
        
        window.Sketch = {
            photos: @Html.Raw(JsonConvert.SerializeObject(Model.Photos, settings))
        };

        resizePhoto();
        $(window).on('resize', resizePhoto);
        showNextPhoto();


        function showNextPhoto() {
            var photo = Sketch.photos.shift();

            if (photo) {

                $('.img-container').css({
                    backgroundImage: 'url(' + photo.imageUrl + ')',
                });
                setTimeout(showNextPhoto, photo.duration);
            }
        }
        function resizePhoto() {
            $('.img-container').height( $(window).height() - $('header').height() );
        }
    </script>
}